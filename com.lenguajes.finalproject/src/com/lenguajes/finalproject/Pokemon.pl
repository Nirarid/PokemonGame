%KB for types of moves
type(normal).
type(fire).
type(water).
type(electric).
type(grass).
type(ice).
type(fighting).
type(poison).
type(ground).
type(flying).
type(psychic).
type(bug).
type(rock).
type(ghost).
type(dragon).

%Kb for pokemon first gen
pokedex(bulbasaur,1,grass).
pokedex(ivysaur,2,grass).
pokedex(venusaur,3,grass).
pokedex(charmander,4,fire).
pokedex(charmeleon,5,fire).
pokedex(charizard,6,fire).
pokedex(squirtle,7,water).
pokedex(wartortle,8,water).
pokedex(blastoise,9,water).
pokedex(caterpie,10,bug).
pokedex(metapod,11,bug).
pokedex(butterfree,12,bug).
pokedex(weedle,13,bug).
pokedex(kakuna,14,bug).
pokedex(beedrill,15,bug).
pokedex(pidgey,16,flying).
pokedex(pidgeotto,17,flying).
pokedex(pidgeot,18,flying).
pokedex(rattata,19,normal).
pokedex(raticate,20,normal).
pokedex(spearow,21,flying).
pokedex(fearow,22,flying).
pokedex(ekans,23,poison).
pokedex(arbok,24,poison).
pokedex(pikachu,25,electric).
pokedex(raichu,26,electric).
pokedex(sandshrew,27,ground).
pokedex(sandslash,28,ground).
pokedex(nidoran,29,poison).
pokedex(nidorina,30,poison).
pokedex(nidoqueen,31,poison).
pokedex(nidoran,32,poison).
pokedex(nidorino,33,poison).
pokedex(nidoking,34,poison).
pokedex(clefairy,35,normal).
pokedex(clefable,36,normal).
pokedex(vulpix,37,fire).
pokedex(ninetales,38,fire).
pokedex(jigglypuff,39,normal).
pokedex(wigglytuff,40,normal).
pokedex(zubat,41,flying).
pokedex(golbat,42,flying).
pokedex(oddish,43,grass).
pokedex(gloom,44,grass).
pokedex(vileplume,45,grass).
pokedex(paras,46,bug).
pokedex(parasect,47,bug).
pokedex(venonat,48,bug).
pokedex(venomoth,49,bug).
pokedex(diglett,50,ground).
pokedex(dugtrio,51,ground).
pokedex(meowth,52,normal).
pokedex(persian,53,normal).
pokedex(psyduck,54,water).
pokedex(golduck,55,water).
pokedex(mankey,56,fighting).
pokedex(primeape,57,fighting).
pokedex(growlithe,58,fire).
pokedex(arcanine,59,fire).
pokedex(poliwag,60,water).
pokedex(poliwhirl,61,water).
pokedex(poliwrath,62,water).
pokedex(abra,63,psychic).
pokedex(kadabra,64,psychic).
pokedex(alakazam,65,psychic).
pokedex(machop,66,fighting).
pokedex(machoke,67,fighting).
pokedex(machamp,68,fighting).
pokedex(bellsprout,69,grass).
pokedex(weepinbell,70,grass).
pokedex(victreebel,71,grass).
pokedex(tentacool,72,water).
pokedex(tentacruel,73,water).
pokedex(geodude,74,rock).
pokedex(graveler,75,rock).
pokedex(golem,76,rock).
pokedex(ponyta,77,fire).
pokedex(rapidash,78,fire).
pokedex(slowpoke,79,water).
pokedex(slowbro,80,water).
pokedex(magnemite,81,electric).
pokedex(magneton,82,electric).
pokedex(farfetchd,83,flying).
pokedex(doduo,84,flying).
pokedex(dodrio,85,flying).
pokedex(seel,86,water).
pokedex(dewgong,87,ice).
pokedex(grimer,88,poison).
pokedex(muk,89,poison).
pokedex(shellder,90,water).
pokedex(cloyster,91,ice).
pokedex(gastly,92,ghost).
pokedex(haunter,93,ghost).
pokedex(gengar,94,ghost).
pokedex(onix,95,rock).
pokedex(drowzee,96,psychic).
pokedex(hypno,97,psychic).
pokedex(krabby,98,water).
pokedex(kingler,99,water).
pokedex(voltorb,100,electric).
pokedex(electrode,101,electric).
pokedex(exeggcute,102,grass).
pokedex(exeggutor,103,grass).
pokedex(cubone, 104, ground).
pokedex(marrowak, 105, ground).
pokedex(hitmonlee, 106, fighting).
pokedex(hitmonchan, 107, fighting).
pokedex(liciktung, 108, normal).
pokedex(koffing, 109, poison).
pokedex(weezing, 110,  poison).
pokedex(rhyhorn, 111, rock).
pokedex(rhydon, 112, rock).
pokedex(chansey, 113, normal).
pokedex(tangela, 114, grass).
pokedex(kangaskhan, 115, normal).
pokedex(horsea, 116, water).
pokedex(seadra, 117, water).
pokedex(goldeen, 118, water).
pokedex(seaking, 119,  water).
pokedex(staryu, 120, water).
pokedex(starmie, 121, water).
pokedex(mr_mime, 122, psychic).
pokedex(scyther, 123, bug).
pokedex(jynx, 124, ice).
pokedex(electabuzz, 125, electric).
pokedex(magmar, 126, fire).
pokedex(pinsir, 127, bug).
pokedex(tauros, 128, normal).
pokedex(magikarp, 129, water).
pokedex(gyarados, 130, water).
pokedex(lapras, 131,  ice).
pokedex(ditto, 132, normal).
pokedex(eevee, 133, normal).
pokedex(vaporeon, 134, water).
pokedex(jolteon, 135, electric).
pokedex(flareon, 136, fire).
pokedex(porygon, 137, normal).
pokedex(omanyte, 138, rock).
pokedex(omastar, 139, rock).
pokedex(kabuto, 140, rock).
pokedex(kabutops, 141, rock).
pokedex(aerodactil, 142, rock).
pokedex(snorlax, 143,  normal).
pokedex(articuno, 144, ice).
pokedex(zapdos, 145, electric).
pokedex(moltres, 146, fire).
pokedex(dratini, 147, dragon).
pokedex(dragonair, 148, dragon).
pokedex(dragonite, 149, dragon).
pokedex(mewtwo, 150, psychic).
pokedex(mew, 151, psychic).

%Kb for super effective reactions
superEffective(fighting, normal).
superEffective(water, fire).
superEffective(ground, fire).
superEffective(rock, fire).
superEffective(electric, water).
superEffective(grass, water).
superEffective(ground, electric).
superEffective(fire, grass).
superEffective(poison, grass).
superEffective(flying, grass).
superEffective(bug, grass).
superEffective(ice, grass).
superEffective(fire, ice).
superEffective(fighting, ice).
superEffective(rock, ice).
superEffective(flying, fighting).
superEffective(psychic, fighting).
superEffective(grass, poison).
superEffective(ice, poison).
superEffective(grass, ground).
superEffective(bug, ground).
superEffective(electric, flying).
superEffective(ice, flying).
superEffective(rock, flying).
superEffective(bug, psychic).
superEffective(ghost, psychic).
superEffective(fire, bug).
superEffective(ground, bug).
superEffective(water, rock).
superEffective(grass, rock).
superEffective(fighting, rock).
superEffective(ground, rock).
superEffective(ghost, ghost).
superEffective(ice, dragon).
superEffective(dragon, dragon).

%KB for not reaction
noEffect(normal, ghost).
noEffect(electric, ground).
noEffect(fighting, ghost).
noEffect(ground, flying).
noEffect(ghost, normal).

%Kb for not effective reaction
notEffective(normal, rock).
notEffective(fire, fire).
notEffective(fire, water).
notEffective(fire, rock).
notEffective(fire, dragon).
notEffective(water, water).
notEffective(water, grass).
notEffective(water, dragon).
notEffective(electric, electric).
notEffective(electric, grass).
notEffective(electric, dragon).
notEffective(grass, fire).
notEffective(grass, grass).
notEffective(grass, poison).
notEffective(grass, flying).
notEffective(grass, bug).
notEffective(grass, dragon).
notEffective(ice, fire).
notEffective(ice, water).
notEffective(ice, ice).
notEffective(fighting, poison).
notEffective(fighting, psychic).
notEffective(fighting, bug).
notEffective(fighting, flying).
notEffective(poison, poison).
notEffective(poison, ground).
notEffective(poison, rock).
notEffective(poison, ghost).
notEffective(ground, grass).
notEffective(ground, bug).
notEffective(flying, electric).
notEffective(flying, rock).
notEffective(psychic, psychic).
notEffective(bug, fire).
notEffective(bug, fighting).
notEffective(bug, poison).
notEffective(bug, flying).
notEffective(bug, ghost).
notEffective(rock, fighting).
notEffective(rock, ground).

%Kb for masters and their pokemons
collection(red, [pikachu,venasaur,charizard,blastoise]).
collection(ash,[pikachu,caterpie,charmander, pidgeot]).
collection(blue, [pidgeot,gyarados,rhydon,exeggutor]).
collection(green,[clefable,blastoise,kangaskhan,gengar]).
collection(misty, [starmie, staryu, psyduck, dugtrio]).
collection(brock,[onix,geodude,kabutops,rhydon]).

normalPower(tackle,1,normal,10,12).
normalPower(fury_Attack,2,normal,10,12).
normalPower(fury_Swipes,3,normal,10,12).
normalPower(headbutt,4,normal,10,12).
normalPower(hyper_beam,5,normal,10,12).
normalPower(skull_bash,6,normal,10,12).
normalPower(slam,7,normal,10,12).
normalPower(splash,8,normal,0,1).

firePower(ember,1,fire,5,7).
firePower(fire_blast,2,fire,12,15).
firePower(fire_punch,3,fire,7,9).
firePower(flamethrower,4,fire,10,12).
firePower(fire_spin,5,fire,3,5).
firePower(fire_pledge,6,fire,12,15).
firePower(flame_wheel,7,fire,5,7).
firePower(heat_wave,8,fire,7,9).

grassPower(absorb,1,grass,5,7).
grassPower(mega_drain,2,grass,10,12).
grassPower(razor_leaf,3,grass,10,12).
grassPower(vine_whip,4,grass,10,12).
grassPower(solar_beam,5,grass,12,15).
grassPower(petal_dance,6,grass,10,12).
grassPower(leech_seed,7,grass,2,4).
grassPower(giga_drain,8,grass,12,14).

waterPower(bubble,1,water,5,7).
waterPower(bubble_beam,2,water,7,9).
waterPower(clamp,3,water,3,5).
waterPower(crabhammer,4,water,10,12).
waterPower(hydro_pump,5,water,12,15).
waterPower(surf,6,water,10,12).
waterPower(waterfall,7,water,10,12).
waterPower(scald,8,water,7,9).

icePower(aurora_beam,1,ice,9,11).
icePower(blizzard,2,ice,12,15).
icePower(ice_beam,3,ice,10,12).
icePower(ice_punch,4,ice,8,10).
icePower(ice_shards,5,ice,5,7).
icePower(icicle_spear,6,ice,10,12).
icePower(ice_fang,7,ice,8,10).
icePower(icy_wind,8,ice,5,7).

electricPower(thunder,1,electric,10,12).
electricPower(thunder_fang,2,electric,10,12).
electricPower(thunder_punch,3,electric,10,12).
electricPower(thunder_shock,4,electric,10,12).
electricPower(thunder_wave,5,electric,10,12).
electricPower(thunderbolt,6,electric,10,12).
electricPower(discharge,7,electric,10,12).
electricPower(volt_tackle,8,electric,10,12).

fightingPower(double_kick,1,fighting,3,5).
fightingPower(high_jump_kick,2,fighting,12,15).
fightingPower(jump_kick,3,fighting,10,12).
fightingPower(karate_chop,4,fighting,5,7).
fightingPower(low_kick,5,fighting,4,6).
fightingPower(rolling_kick,6,fighting,7,9).
fightingPower(seismic_toss,7,fighting,5,7).
fightingPower(submission,8,fighting,9,11).

poisonPower(acid,1,poison,3,5).
poisonPower(poison_sting,2,poison,1,3).
poisonPower(sludge,3,poison,3,5).
poisonPower(smog,4,poison,3,5).
poisonPower(venoshock,5,poison,7,9).
poisonPower(poison_fang,6,poison,7,9).
poisonPower(sludge_bomb,7,poison,10,12).
poisonPower(cross_poison,8,poison,10,12).

groundPower(bone_club,1,ground,3,5).
groundPower(bonemerang,2,ground,5,7).
groundPower(dig,3,ground,8,10).
groundPower(earthquake,4,ground,10,12).
groundPower(fissure,5,ground,0,15).
groundPower(earth_power,6,ground,7,9).
groundPower(bulldoze,7,ground,5,7).
groundPower(mud_slap,8,ground,3,5).

flyingPower(drill_peck,1,flying,7,9).
flyingPower(fly,2,flying,10,12).
flyingPower(gust,3,flying,5,7).
flyingPower(peck,4,flying,5,7).
flyingPower(sky_attack,5,flying,12,15).
flyingPower(wing_attack,6,flying,7,9).
flyingPower(aereal_ace,7,flying,10,12).
flyingPower(brave_bird,8,flying,12,15).

psychicPower(confusion,1,psychic,10,12).
psychicPower(dream_eater,2,psychic,0,0).
psychicPower(psybeam,3,psychic,7,9).
psychicPower(psychic,4,psychic,7,9).
psychicPower(extrasensory,5,psychic,7,9).
psychicPower(psycho_cut,6,psychic,10,12).
psychicPower(expanding_force,7,psychic,10,12).
psychicPower(freezing_glare,8,psychic,10,12).

bugPower(leech_life,1,bug,3,5).
bugPower(pin_missile,2,bug,5,7).
bugPower(twin_needle,3,bug,3,5).
bugPower(fury_cutter,4,bug,7,9).
bugPower(signal_beam,5,bug,5,7).
bugPower(bug_buzz,6,bug,7,9).
bugPower(bug_bite,7,bug,5,7).
bugPower(x_scissor,8,bug,10,12).

rockPower(rock_slide,1,rock,5,7).
rockPower(rock_throw,2,rock,5,7).
rockPower(head_smash,3,rock,12,15).
rockPower(power_gem,4,rock,7,10).
rockPower(rock_blast,5,rock,3,5).
rockPower(rock_tomb,6,rock,5,7).
rockPower(stone_edge,7,rock,12,15).
rockPower(ancient_power,8,rock,7,9).

ghostPower(lick,1,ghost,1,3).
ghostPower(astonish,2,ghost,1,3).
ghostPower(hex,3,ghost,5,5).
ghostPower(night_shade,4,ghost,7,9).
ghostPower(shadow_ball,5,ghost,4,4).
ghostPower(shadow_claw,6,ghost,10,12).
ghostPower(shadow_force,7,ghost,12,15).
ghostPower(shadow_punch,8,ghost,7,9).

dragonPower(dragon_rage,1,dragon,4,4).
dragonPower(breaking_swipe,2,dragon,3,5).
dragonPower(clanging_scales,3,dragon,10,12).
dragonPower(dragon_breath,4,dragon,5,5).
dragonPower(dragon_pulse,5,dragon,5,7).
dragonPower(outrage,6,dragon,10,12).
dragonPower(dragon_tail,7,dragon,8,10).
dragonPower(spacial_rend,8,dragon,12,15).

xAgainstY(X,Y,Z):-
	superEffective(X,Y),
	Z is 1.
xAgainstY(X,Y,Z):-
	notEffective(X,Y),
	Z is 2.
xAgainstY(X,Y,Z):-
	noEffect(X,Y),
	Z is 3.
xAgainstY(_,_,Z):-
	Z is 4.
	
canXWin(X,Y):-
    pokedex(X,_,A),
    pokedex(Y,_,B),
    superEffective(A,B).

canYWin(X,Y):-
    pokedex(X,_,A),
    pokedex(Y,_,B),
    superEffective(B,A).

xloosesToo(X,Y):-
    pokedex(X,_,A),
    pokedex(Y,_,B),
    notEffective(A,B).
xloosesToo(X,Y):-
    pokedex(X,_,A),
    pokedex(Y,_,B),
    noEffect(A,B).

yloosesToo(X,Y):-
    pokedex(X,_,A),
    pokedex(Y,_,B),
    notEffective(B,A).
yloosesToo(X,Y):-
    pokedex(X,_,A),
    pokedex(Y,_,B),
    noEffect(B,A).


canBeat(_,_,151,_).
canBeat(X,L2,Sum,L1):-
    pokedex(Y,Sum,_),
    canXWin(X,Y),
    NewSum is Sum+1,
    append(L2,[_|Y],L1),
    canBeat(X,L1,NewSum,L1).
canBeat(X,L2,Sum,L1):-
    NewSum is Sum+1,
    canBeat(X,L2,NewSum,L1).


doesXHaveTheSamePokemonAsY(X,Y):-
    collection(X,L1),
    collection(Y,L2),
    checkList(L1,L1,L2,L2).
checkList(L1,L1,L2,L2):-
    checkList(L1,L1,L2,L2,_).
checkList(_,[],_,[],true).
checkList(_,[],_,_,_):- false.
checkList(_,[_|B],[E|F],[],_):-
    checkList(B,B,[E|F],F,_).
checkList(L1,[A|_],L2,[C|_],_):-
    A == C,
    checkList(L1,[],L2,[],true).

checkList(L1,[A|_],L2,[C|D],_):-
    A \= C,
    checkList(L1,L1,L2,D,false).

%checkList([H|T],[_|B],L2,[],_):-
    %checkList(T,B,L2,L2,false).

shouldYouChangePokemon(X,Y):-
    xloosesToo(X,Y).

pokemonBattle(L1,X,Z):-
    collection(X,L2),
    battle(L1,L2,Z).
battle([],[],Z):-
    Z is 1.
battle(_,[],Z):-
    Z is 2.
battle([],_,Z):-
	Z is 3.

battle([A|B],[C|D],Z):-
    canXWin(A,C),
    battle([A|B],D,Z).
battle([A|B],[C|D],Z):-
    canYWin(A,C),
    battle(B,[C|D],Z).
battle([A|B],[C|D],Z):-
    xloosesToo(A,C),
    battle(B,[C|D],Z).
battle([A|B],[C|D],Z):-
    yloosesToo(A,C),
    battle([A|B],D,Z).
battle([_|B],[_|D],Z):-
    battle(B,D,Z).

testshouldYouChangePokemon(_,_):-
    shouldYouChangePokemon(pidgey,pikachu),
    shouldYouChangePokemon(charizard,venusaur).

testPokemonBattle(_,_):-
    pokemonBattle([pidgey,charmander,pidgey,rattata],red),
    pokemonBattle([pidgey,charmander,pidgey,rattata],ash).

testDoesXHaveTheSamePokemonAsY(_,_):-
    doesXHaveTheSamePokemonAsY(red,blue),
    doesXHaveTheSamePokemonAsY(misty,brock).





